<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>northstar.LM | AI Meeting Assistant</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="gradient-bg"></div>
    
    <header>
        <div class="logo">
            <span class="logo-icon">&#11088;</span>
            <h1>northstar.LM</h1>
        </div>
        <p class="tagline">Transform your meetings into actionable insights</p>
    </header>

    <main>
        <!-- API Key Section -->
        <section class="config-section">
            <div class="api-key-container">
                <label for="api-key">
                    <span class="label-icon">&#128273;</span>
                    OpenAI API Key
                </label>
                <div class="input-group">
                    <input type="password" id="api-key" placeholder="sk-..." autocomplete="off">
                    <button type="button" id="toggle-key" class="icon-btn" title="Show/Hide API Key">
                        &#128065;
                    </button>
                    <button type="button" id="save-key" class="btn-secondary" title="Save to browser">
                        Save
                    </button>
                </div>
                <p class="hint">Your key is stored locally and sent directly to OpenAI. <a href="https://platform.openai.com/api-keys" target="_blank">Get an API key</a></p>
            </div>
        </section>

        <!-- Input Section -->
        <section class="input-section">
            <div class="input-tabs">
                <button class="tab-btn active" data-tab="audio">
                    <span class="tab-icon">&#127908;</span>
                    Audio
                </button>
                <button class="tab-btn" data-tab="pdf">
                    <span class="tab-icon">&#128196;</span>
                    PDF
                </button>
                <button class="tab-btn" data-tab="text">
                    <span class="tab-icon">&#128221;</span>
                    Text
                </button>
                <button class="tab-btn" data-tab="url">
                    <span class="tab-icon">&#127760;</span>
                    URL
                </button>
            </div>

            <div class="tab-content">
                <div id="audio-tab" class="tab-pane active">
                    <div class="upload-zone" id="drop-zone">
                        <div class="upload-icon">&#127926;</div>
                        <p>Drag & drop your audio file here</p>
                        <p class="hint">or click to browse</p>
                        <input type="file" id="audio-file" accept=".m4a,.mp3,.webm,.mp4,.mpga,.wav,.mpeg,.ogg,.oga,.flac" hidden>
                        <p class="file-types">Supported: MP3, WAV, M4A, OGG, FLAC, MP4, WEBM</p>
                    </div>
                    <div id="file-info" class="file-info hidden">
                        <span class="file-name"></span>
                        <button type="button" class="remove-file">&#10005;</button>
                    </div>
                </div>

                <div id="pdf-tab" class="tab-pane">
                    <div class="upload-zone" id="pdf-drop-zone">
                        <div class="upload-icon">&#128196;</div>
                        <p>Drag & drop your PDF file here</p>
                        <p class="hint">or click to browse</p>
                        <input type="file" id="pdf-file" accept=".pdf" hidden>
                        <p class="file-types">Supported: PDF documents</p>
                    </div>
                    <div id="pdf-file-info" class="file-info hidden">
                        <span class="pdf-file-name"></span>
                        <button type="button" class="remove-pdf-file">&#10005;</button>
                    </div>
                </div>

                <div id="text-tab" class="tab-pane">
                    <textarea id="text-input" placeholder="Paste your meeting transcript or notes here..."></textarea>
                </div>

                <div id="url-tab" class="tab-pane">
                    <div class="url-input-container">
                        <div class="url-input-wrapper">
                            <span class="url-icon">ðŸ”—</span>
                            <input type="url" id="url-input" placeholder="https://example.com/meeting-notes" />
                            <button id="fetch-url-btn" class="btn-fetch" type="button">
                                <span class="btn-text">Fetch</span>
                                <span class="btn-loader hidden">
                                    <span class="spinner-small"></span>
                                </span>
                            </button>
                        </div>
                        <p class="url-hint">Enter a webpage URL to extract its text content</p>
                    </div>
                    <div id="url-preview" class="url-preview hidden">
                        <div class="url-preview-header">
                            <span class="url-preview-title">Extracted Content</span>
                            <button type="button" class="clear-url-btn">&#10005; Clear</button>
                        </div>
                        <div class="url-preview-content" id="url-preview-content"></div>
                    </div>
                </div>
            </div>

            <button id="analyze-btn" class="btn-primary" disabled>
                <span class="btn-text">Analyze Meeting</span>
                <span class="btn-loader hidden">
                    <span class="spinner"></span>
                    Processing...
                </span>
            </button>
        </section>

        <!-- Progress Section -->
        <section id="progress-section" class="progress-section hidden">
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
            <p class="progress-text">Initializing...</p>
        </section>

        <!-- Results Section -->
        <section id="results-section" class="results-section hidden">
            <h2>Analysis Results</h2>
            
            <div class="results-grid">
                <div class="result-card">
                    <div class="card-header">
                        <span class="card-icon">&#128196;</span>
                        <h3>Summary</h3>
                    </div>
                    <div class="card-content" id="result-summary">
                        <!-- Summary will be inserted here -->
                    </div>
                </div>

                <div class="result-card">
                    <div class="card-header">
                        <span class="card-icon">&#128161;</span>
                        <h3>Key Points</h3>
                    </div>
                    <div class="card-content" id="result-keypoints">
                        <!-- Key points will be inserted here -->
                    </div>
                </div>

                <div class="result-card">
                    <div class="card-header">
                        <span class="card-icon">&#9989;</span>
                        <h3>Action Items</h3>
                    </div>
                    <div class="card-content" id="result-actions">
                        <!-- Action items will be inserted here -->
                    </div>
                </div>

                <div class="result-card sentiment-card">
                    <div class="card-header">
                        <span class="card-icon">&#128200;</span>
                        <h3>Sentiment</h3>
                    </div>
                    <div class="card-content" id="result-sentiment">
                        <!-- Sentiment will be inserted here -->
                    </div>
                </div>

                <div class="result-card metrics-card">
                    <div class="card-header">
                        <span class="card-icon">&#128202;</span>
                        <h3>Usage Metrics</h3>
                    </div>
                    <div class="card-content" id="result-metrics">
                        <!-- Metrics will be inserted here -->
                    </div>
                </div>
            </div>

            <div class="results-actions">
                <button id="download-btn" class="btn-primary">
                    <span>&#128229;</span> Download DOCX
                </button>
                <button id="new-analysis-btn" class="btn-secondary">
                    <span>&#10227;</span> New Analysis
                </button>
            </div>

            <!-- Chat with Data Section -->
            <div class="feature-section" id="chat-section">
                <div class="feature-header">
                    <h3><span>ðŸ’¬</span> Ask Questions</h3>
                    <p class="feature-desc">Chat with your meeting data using AI</p>
                </div>
                
                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="chat-welcome">
                            <div class="chat-welcome-icon">ðŸ¤–</div>
                            <div class="chat-welcome-text">
                                <strong>Meeting Assistant</strong>
                                <p>I have access to your transcript and analysis. Ask me about decisions, action items, specific topics, or anything else from the meeting.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-input-area">
                        <input type="text" id="chat-input" placeholder="Type your question here..." autocomplete="off" />
                        <button id="chat-send-btn" class="btn-chat-send" title="Send message">
                            <span class="btn-text">âž¤</span>
                            <span class="btn-loader hidden">
                                <span class="spinner-small"></span>
                            </span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Audio Briefing Section -->
            <div class="feature-section" id="audio-briefing-section">
                <h3><span>&#127911;</span> Audio Briefing</h3>
                <p class="feature-desc">Generate a 2-minute executive audio summary</p>
                
                <div class="feature-controls">
                    <div class="voice-selector">
                        <label for="voice-select">Voice:</label>
                        <select id="voice-select">
                            <option value="alloy">Alloy (Neutral)</option>
                            <option value="echo">Echo (Male)</option>
                            <option value="fable">Fable (British)</option>
                            <option value="onyx">Onyx (Deep Male)</option>
                            <option value="nova" selected>Nova (Female)</option>
                            <option value="shimmer">Shimmer (Soft Female)</option>
                        </select>
                    </div>
                    <button id="generate-audio-btn" class="btn-secondary">
                        <span class="btn-text">&#127908; Generate Audio</span>
                        <span class="btn-loader hidden">
                            <span class="spinner"></span>
                            Generating...
                        </span>
                    </button>
                </div>

                <div id="audio-player-container" class="audio-player-container hidden">
                    <audio id="audio-player" controls></audio>
                    <button id="download-audio-btn" class="btn-secondary">
                        <span>&#128229;</span> Download MP3
                    </button>
                </div>
            </div>

            <!-- Infographic Section -->
            <div class="feature-section" id="infographic-section">
                <h3><span>&#127912;</span> Meeting Infographic</h3>
                <p class="feature-desc">Create a visual infographic from your meeting insights</p>
                
                <div class="feature-controls">
                    <div class="prompt-input-group">
                        <input type="text" id="infographic-prompt" placeholder="Describe your preferred style (e.g., 'colorful corporate with icons')" />
                    </div>
                    <button id="generate-infographic-btn" class="btn-secondary">
                        <span class="btn-text">&#127912; Generate Infographic</span>
                        <span class="btn-loader hidden">
                            <span class="spinner"></span>
                            Creating...
                        </span>
                    </button>
                </div>

                <div id="infographic-container" class="infographic-container hidden">
                    <img id="infographic-image" alt="Meeting Infographic" />
                    <button id="download-infographic-btn" class="btn-secondary">
                        <span>&#128229;</span> Download Image
                    </button>
                </div>
            </div>

        </section>

        <!-- Error Section -->
        <section id="error-section" class="error-section hidden">
            <div class="error-content">
                <span class="error-icon">&#9888;</span>
                <p id="error-message"></p>
                <button id="dismiss-error" class="btn-secondary">Dismiss</button>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2026 northstar.LM | Your meetings, distilled.</p>
        <p class="credits">
            Powered by 
            <a href="https://openai.com" target="_blank">OpenAI Whisper, GPT-5.2, GPT-5-mini, GPT-4o-mini-TTS & GPT-Image-1.5</a>
        </p>
    </footer>

    <!-- External Libraries -->
    <script src="https://unpkg.com/docx@8.5.0/build/index.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.min.mjs" type="module"></script>
    <script src="js/app.js?v=17" type="module"></script>
</body>
</html>
